{"version":3,"file":"wave-client.esm.js","sources":["../src/core/errors.js","../src/wave-client.js"],"sourcesContent":["/**\n * Error classes for the WAVE JavaScript client\n */\n\nexport class WaveClientError extends Error {\n    constructor(message, statusCode = null, detail = null, retryAfter = undefined) {\n        super(message);\n        this.name = 'WaveClientError';\n        this.statusCode = statusCode;\n        this.detail = detail;\n        if (retryAfter !== undefined) {\n            this.retryAfter = retryAfter; // milliseconds to wait before retry\n        }\n    }\n}\n\nexport class ValidationError extends WaveClientError {\n    constructor(message, detail) {\n        super(message, 400, detail);\n        this.name = 'ValidationError';\n    }\n}\n\nexport class AuthenticationError extends WaveClientError {\n    constructor(message, detail) {\n        super(message, 401, detail);\n        this.name = 'AuthenticationError';\n    }\n}\n\nexport class AuthorizationError extends WaveClientError {\n    constructor(message, detail) {\n        super(message, 403, detail);\n        this.name = 'AuthorizationError';\n    }\n}\n\nexport class NotFoundError extends WaveClientError {\n    constructor(message, detail) {\n        super(message, 404, detail);\n        this.name = 'NotFoundError';\n    }\n}\n\nexport class RateLimitError extends WaveClientError {\n    constructor(message, detail, retryAfter) {\n        super(message, 429, detail, retryAfter);\n        this.name = 'RateLimitError';\n    }\n}\n\nexport class ServerError extends WaveClientError {\n    constructor(message, statusCode, detail) {\n        super(message, statusCode, detail);\n        this.name = 'ServerError';\n    }\n}\n\n/**\n * Create appropriate error from HTTP response\n * @param {Response} response - Fetch API response\n * @param {Object} errorData - Parsed error response body\n * @returns {WaveClientError} Appropriate error instance\n */\nexport function createErrorFromResponse(response, errorData) {\n    const { status } = response;\n    const message = errorData?.detail || response.statusText || 'Unknown error';\n    const detail = errorData?.detail;\n\n    switch (status) {\n        case 400:\n            return new ValidationError(message, detail);\n        case 401:\n            return new AuthenticationError(message, detail);\n        case 403:\n            return new AuthorizationError(message, detail);\n        case 404:\n            return new NotFoundError(message, detail);\n        case 429: {\n            const retryAfter = parseRetryAfter(response.headers.get('Retry-After'));\n            return new RateLimitError(message, detail, retryAfter);\n        }\n        case 500:\n        case 502:\n        case 503:\n        case 504:\n            return new ServerError(message, status, detail);\n        default:\n            return new WaveClientError(message, status, detail);\n    }\n}\n\n/**\n * Parse Retry-After header value to milliseconds\n * @param {string|null} retryAfterHeader - Retry-After header value\n * @returns {number} Retry delay in milliseconds\n */\nfunction parseRetryAfter(retryAfterHeader) {\n    if (!retryAfterHeader) {\n        return undefined; // Return undefined when no header is provided\n    }\n\n    // Handle both seconds (number) and HTTP date formats\n    const seconds = parseInt(retryAfterHeader, 10);\n    if (!isNaN(seconds)) {\n        return seconds * 1000; // Convert to milliseconds\n    }\n\n    // Handle HTTP date format (less common for rate limiting)\n    const date = new Date(retryAfterHeader);\n    if (!isNaN(date.getTime())) {\n        return Math.max(0, date.getTime() - Date.now());\n    }\n\n    return 5000; // Default fallback for invalid headers\n}\n","/**\n * WAVE JavaScript Client\n *\n * Simple client for logging experiment data to the WAVE Backend API.\n * Focused on experiment data collection with robust error handling and retry logic.\n *\n * **Authentication**: Uses URL parameter-based API key extraction for browser security.\n * Add your API key to the URL: `?key=exp_abc123` or provide manually in constructor.\n *\n * **Security Benefits**:\n * - No API keys exposed in JavaScript source code or bundles\n * - Each experiment session gets unique temporary key via URL\n * - Prevents accidental exposure in version control\n *\n * @example\n * // Import using default export syntax\n * import WaveClient from 'https://cdn.jsdelivr.net/gh/WAVE-Lab-Williams/wave-client@v1.0.0/javascript/dist/wave-client.esm.js';\n *\n * // URL-based authentication (recommended)\n * // URL: https://experiment-site.com/task.html?key=exp_abc123&participant=P001\n * const client = new WaveClient();\n *\n * @example\n * // Manual API key (for testing or special cases)\n * const client = new WaveClient({ apiKey: \"exp_abc123\" });\n */\n\nimport {\n    WaveClientError,\n    ValidationError,\n    AuthenticationError,\n    AuthorizationError,\n    NotFoundError,\n    RateLimitError,\n    ServerError,\n    createErrorFromResponse,\n} from './core/errors.js';\n\nexport default class WaveClient {\n    /**\n     * Create a WAVE client instance\n     * @param {Object} options - Configuration options\n     * @param {string} [options.apiKey] - API key (overrides URL parameter extraction)\n     * @param {string} [options.baseUrl='http://localhost:8000'] - Base URL for API\n     * @param {number} [options.timeout=30000] - Request timeout in milliseconds (generous for experiments)\n     * @param {number} [options.retries=5] - Maximum number of retries (prevent data loss)\n     * @param {number} [options.baseDelay=1000] - Base delay for exponential backoff (ms)\n     * @param {number} [options.maxDelay=30000] - Maximum delay between retries (ms)\n     *\n     * @example\n     * // Automatic URL parameter extraction (recommended for browser experiments)\n     * // URL: https://experiment-site.com/task.html?key=exp_abc123\n     * const client = new WaveClient();\n     *\n     * @example\n     * // Manual API key (overrides URL parameter)\n     * const client = new WaveClient({\n     *   apiKey: \"exp_abc123\",\n     *   baseUrl: \"https://api.example.com\"\n     * });\n     */\n    constructor(options = {}) {\n        // Configuration\n        this.apiKey = options.apiKey || this._getApiKeyFromUrl();\n        this.baseUrl =\n            options.baseUrl || this._getEnvVar('WAVE_API_URL') || 'http://localhost:8000';\n        this.timeout = options.timeout || 30000;\n        this.maxRetries = options.retries || 5;\n        this.baseDelay = options.baseDelay || 1000;\n        this.maxDelay = options.maxDelay || 30000;\n\n        // Client version for compatibility checking\n        this.clientVersion = '1.0.0';\n\n        // Validate API key is present\n        if (!this.apiKey) {\n            throw new AuthenticationError(\n                'API key is required. Provide apiKey option or include \"key\" parameter in URL.'\n            );\n        }\n\n        // Ensure baseUrl doesn't end with slash\n        this.baseUrl = this.baseUrl.replace(/\\/$/, '');\n    }\n\n    /**\n     * Primary method: Log experiment data\n     * @param {string} experimentId - Experiment UUID\n     * @param {string} participantId - Participant identifier\n     * @param {Object} data - Experiment data matching the experiment type schema\n     * @returns {Promise<Object>} Created data row with all fields\n     */\n    async logExperimentData(experimentId, participantId, data) {\n        if (!experimentId) {\n            throw new ValidationError('experimentId is required');\n        }\n        if (!participantId) {\n            throw new ValidationError('participantId is required');\n        }\n        if (!data || typeof data !== 'object' || Array.isArray(data)) {\n            throw new ValidationError('data must be a non-empty object');\n        }\n\n        const requestBody = {\n            participant_id: participantId,\n            data: data,\n        };\n\n        const url = `/api/v1/experiment-data/${experimentId}/data/`;\n        return await this._makeRequest('POST', url, requestBody);\n    }\n\n    /**\n     * Get API health status\n     * @returns {Promise<Object>} Health status\n     */\n    async getHealth() {\n        return await this._makeRequest('GET', '/health');\n    }\n\n    /**\n     * Get API version and compatibility information\n     * @returns {Promise<Object>} Version information\n     */\n    async getVersion() {\n        return await this._makeRequest('GET', '/version');\n    }\n\n    /**\n     * Update base URL\n     * @param {string} baseUrl - New base URL\n     */\n    setBaseUrl(baseUrl) {\n        if (!baseUrl) {\n            throw new ValidationError('Base URL cannot be empty');\n        }\n        this.baseUrl = baseUrl.replace(/\\/$/, '');\n    }\n\n    /**\n     * Make HTTP request with retry logic\n     * @private\n     * @param {string} method - HTTP method\n     * @param {string} url - URL path (relative to baseUrl)\n     * @param {Object} [body] - Request body for POST/PUT requests\n     * @param {number} [attempt=1] - Current attempt number\n     * @returns {Promise<Object>} Response data\n     */\n    async _makeRequest(method, url, body = null, attempt = 1) {\n        const fullUrl = `${this.baseUrl}${url}`;\n\n        const headers = {\n            Authorization: `Bearer ${this.apiKey}`,\n            'X-WAVE-Client-Version': this.clientVersion,\n            'Content-Type': 'application/json',\n        };\n\n        const requestOptions = {\n            method,\n            headers,\n        };\n\n        // Add timeout support (AbortSignal.timeout is not available in older environments)\n        if (typeof AbortSignal !== 'undefined' && AbortSignal.timeout) {\n            requestOptions.signal = AbortSignal.timeout(this.timeout);\n        } else if (typeof AbortController !== 'undefined') {\n            // Fallback for older environments\n            const controller = new AbortController();\n            requestOptions.signal = controller.signal;\n            setTimeout(() => controller.abort(), this.timeout);\n        }\n\n        if (body && (method === 'POST' || method === 'PUT')) {\n            requestOptions.body = JSON.stringify(body);\n        }\n\n        try {\n            const response = await fetch(fullUrl, requestOptions);\n\n            if (!response.ok) {\n                // Parse error response\n                let errorData;\n                try {\n                    errorData = await response.json();\n                } catch {\n                    errorData = { detail: response.statusText };\n                }\n\n                const error = createErrorFromResponse(response, errorData);\n\n                // Retry logic for retryable errors\n                if (this._shouldRetry(error, attempt)) {\n                    const delay = this._calculateDelay(attempt, error.retryAfter);\n                    console.warn(\n                        `Request failed (${error.name}), retrying in ${delay}ms (attempt ${attempt}/${this.maxRetries})`\n                    );\n\n                    await this._sleep(delay);\n                    return await this._makeRequest(method, url, body, attempt + 1);\n                }\n\n                throw error;\n            }\n\n            // Parse successful response\n            const responseData = await response.json();\n            return responseData;\n        } catch (error) {\n            // Handle network errors and timeouts\n            if (error.name === 'AbortError') {\n                const timeoutError = new WaveClientError(`Request timeout after ${this.timeout}ms`);\n\n                if (this._shouldRetry(timeoutError, attempt)) {\n                    const delay = this._calculateDelay(attempt);\n                    console.warn(\n                        `Request timeout, retrying in ${delay}ms (attempt ${attempt}/${this.maxRetries})`\n                    );\n\n                    await this._sleep(delay);\n                    return await this._makeRequest(method, url, body, attempt + 1);\n                }\n\n                throw timeoutError;\n            }\n\n            // Re-throw WAVE client errors\n            if (error instanceof WaveClientError) {\n                throw error;\n            }\n\n            // Handle other network errors\n            const networkError = new WaveClientError(`Network error: ${error.message}`);\n\n            if (this._shouldRetry(networkError, attempt)) {\n                const delay = this._calculateDelay(attempt);\n                console.warn(\n                    `Network error, retrying in ${delay}ms (attempt ${attempt}/${this.maxRetries})`\n                );\n\n                await this._sleep(delay);\n                return await this._makeRequest(method, url, body, attempt + 1);\n            }\n\n            throw networkError;\n        }\n    }\n\n    /**\n     * Determine if request should be retried\n     * @private\n     * @param {Error} error - Error that occurred\n     * @param {number} attempt - Current attempt number\n     * @returns {boolean} Whether to retry\n     */\n    _shouldRetry(error, attempt) {\n        if (attempt > this.maxRetries) {\n            return false;\n        }\n\n        // Don't retry client errors (4xx except rate limiting)\n        if (\n            error instanceof ValidationError ||\n            error instanceof AuthenticationError ||\n            error instanceof AuthorizationError ||\n            error instanceof NotFoundError\n        ) {\n            return false;\n        }\n\n        // Retry rate limits and server errors\n        if (\n            error instanceof RateLimitError ||\n            error instanceof ServerError ||\n            error.name === 'AbortError' ||\n            error instanceof WaveClientError\n        ) {\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * Calculate delay for exponential backoff with jitter\n     * @private\n     * @param {number} attempt - Current attempt number\n     * @param {number} [retryAfter] - Server-specified retry delay (ms)\n     * @returns {number} Delay in milliseconds\n     */\n    _calculateDelay(attempt, retryAfter = null) {\n        if (retryAfter) {\n            // Honor server-specified delay for rate limiting\n            return Math.min(retryAfter, this.maxDelay);\n        }\n\n        // Exponential backoff with jitter\n        const exponentialDelay = this.baseDelay * Math.pow(2, attempt - 1);\n        const jitter = Math.random() * 1000; // Add randomness to avoid thundering herd\n\n        return Math.min(exponentialDelay + jitter, this.maxDelay);\n    }\n\n    /**\n     * Sleep for specified duration\n     * @private\n     * @param {number} ms - Milliseconds to sleep\n     * @returns {Promise<void>}\n     */\n    _sleep(ms) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n\n    /**\n     * Extract API key from URL parameters (browser-based authentication)\n     * @private\n     * @returns {string|null} API key from URL parameter or null if not found\n     * @example\n     * // URL: https://experiment-site.com/task.html?key=exp_abc123&participant=P001\n     * // Returns: \"exp_abc123\"\n     *\n     * // URL: https://experiment-site.com/task.html#key=exp_def456\n     * // Returns: \"exp_def456\"\n     */\n    _getApiKeyFromUrl() {\n        // In Node.js test environment, check global references\n        const windowObj = typeof window !== 'undefined' ? window : global.window;\n        const URLSearchParamsClass =\n            typeof URLSearchParams !== 'undefined' ? URLSearchParams : global.URLSearchParams;\n\n        // Check if we're in a browser environment\n        if (!windowObj || !URLSearchParamsClass) {\n            return null; // Not in browser environment\n        }\n\n        try {\n            // Check query parameters (?key=...)\n            const urlParams = new URLSearchParamsClass(windowObj.location.search);\n            const queryKey = urlParams.get('key');\n            if (queryKey) return queryKey;\n\n            // Check hash parameters (#key=...)\n            const hashParams = new URLSearchParamsClass(windowObj.location.hash.substring(1));\n            const hashKey = hashParams.get('key');\n            if (hashKey) return hashKey;\n\n            return null;\n        } catch (error) {\n            console.warn('Failed to extract API key from URL:', error.message);\n            return null;\n        }\n    }\n\n    /**\n     * Get environment variable (Node.js only for security)\n     * @private\n     * @param {string} name - Environment variable name\n     * @returns {string|undefined} Environment variable value\n     */\n    _getEnvVar(name) {\n        // Node.js environment only\n        if (typeof process !== 'undefined' && process.env) {\n            return process.env[name];\n        }\n\n        // Browser environment: require explicit apiKey parameter\n        // Environment variables in browser bundles are always public\n        return undefined;\n    }\n}\n\n// Export error classes for external use\nexport {\n    WaveClientError,\n    ValidationError,\n    AuthenticationError,\n    AuthorizationError,\n    NotFoundError,\n    RateLimitError,\n    ServerError,\n};\n"],"names":[],"mappings":"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"}